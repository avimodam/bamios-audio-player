{"version":3,"file":"bamios.min.js","sources":["../../src/js/bamios.js"],"sourcesContent":["class Bamios {\n  constructor(el, options) {\n    const opts = options || {};\n\n    this.player =\n      typeof el === 'string' ? document.querySelector(el) : undefined;\n\n    if (undefined === this.player || null === this.player)\n      throw 'Cannot determine player element!';\n\n    this.audio =\n      typeof el === 'string'\n        ? document.querySelector(el + ' audio')\n        : undefined;\n\n    if (undefined === this.audio || null === this.audio)\n      throw 'Cannot determine audio element!';\n\n    this.pauseOthersOnPlay =\n      undefined !== opts.pauseOthersOnPlay ? opts.pauseOthersOnPlay : true;\n    this.muted = false;\n    this.isAdjustingTime = false;\n    this.isClickedPlayBtn = false;\n\n    this.initUi();\n    this.initEvents();\n  }\n\n  initUi() {\n    this.player.classList.add('bamios');\n\n    // Volume control\n    this.volumeCtl = document.createElement('div');\n    this.volumeCtl.classList.add('bamios-volume-ctl');\n\n    // Volume panel container\n    this.volumePanelContainer = document.createElement('div');\n    this.volumePanelContainer.classList.add('bamios-volume-panel-container');\n    this.volumeCtl.append(this.volumePanelContainer);\n\n    // Volume handle\n    this.volumeHandle = document.createElement('div');\n    this.volumeHandle.classList.add('bamios-volume-handle');\n    this.volumePanelContainer.append(this.volumeHandle);\n\n    // Volume panel\n    this.volumePanel = document.createElement('div');\n    this.volumePanel.classList.add('bamios-volume-panel');\n    this.volumePanelContainer.append(this.volumePanel);\n\n    // Volume slider\n    this.volumeSlider = document.createElement('div');\n    this.volumeSlider.classList.add('bamios-volume-slider');\n    this.volumePanel.append(this.volumeSlider);\n\n    // Volume button\n    this.volumeBtn = document.createElement('button');\n    this.volumeBtn.classList.add('bamios-btn');\n    this.volumeBtn.classList.add('bamios-btn-volume');\n    this.volumeBtn.innerHTML = Bamios.volumeIcon();\n    this.volumeCtl.append(this.volumeBtn);\n\n    // Controls left\n    const controlsLeft = document.createElement('div');\n    controlsLeft.classList.add('bamios-left-controls');\n\n    // Replay button\n    this.replayBtn = document.createElement('button');\n    this.replayBtn.setAttribute('type', 'button');\n    this.replayBtn.setAttribute('title', 'Replay');\n    this.replayBtn.classList.add('bamios-btn');\n    this.replayBtn.classList.add('bamios-btn-replay');\n    this.replayBtn.innerHTML = Bamios.replayIcon();\n    controlsLeft.append(this.replayBtn);\n\n    // Play button\n    const playBtn = document.createElement('button');\n    playBtn.classList.add('bamios-btn');\n    playBtn.classList.add('bamios-btn-play-pause');\n    playBtn.addEventListener('click', (playBtnEvent) => {\n      if (\n        !playBtnEvent.currentTarget.classList.contains('bamios-playing') &&\n        this.pauseOthersOnPlay\n      ) {\n        Bamios.pauseOtherPlayers();\n      }\n      if (!playBtnEvent.currentTarget.classList.contains('bamios-playing')) {\n        this.isClickedPlayBtn = true;\n        Bamios.playPlayer(this.player);\n      } else {\n        this.isClickedPlayBtn = false;\n        Bamios.pausePlayer(this.player);\n      }\n    });\n    playBtn.innerHTML = Bamios.playIcon();\n    controlsLeft.append(playBtn);\n\n    // Forward button\n    const forwardBtn = document.createElement('button');\n    forwardBtn.classList.add('bamios-btn');\n    forwardBtn.classList.add('bamios-btn-forward');\n    forwardBtn.addEventListener('click', () => {\n      this.audio.currentTime = this.audio.currentTime + 10;\n    });\n    forwardBtn.innerHTML = Bamios.forwardIcon();\n    controlsLeft.append(forwardBtn);\n\n    this.player.append(controlsLeft);\n\n    // Controls right\n    this.controlsRight = document.createElement('div');\n    this.controlsRight.classList.add('bamios-right-controls');\n\n    // Current time\n    const currentTime = document.createElement('div');\n    currentTime.classList.add('bamios-current-time');\n    currentTime.innerText = '00:00';\n    this.controlsRight.append(currentTime);\n\n    this.audio.ontimeupdate = () => {\n      currentTime.innerHTML = Bamios.toTimeString(this.audio.currentTime);\n      let currentPercent =\n        (this.audio.currentTime / this.audio.duration) * 100 + '%';\n      playProgress.style.width = currentPercent;\n      if (!mouseClickedDurationBar) {\n        progressHandle.style.transform =\n          'translate(' +\n          (playProgress.getBoundingClientRect().width - 8) +\n          'px, -50%)';\n      }\n    };\n\n    this.audio.onended = () => {\n      this.stop();\n    };\n\n    // Duration bar\n    const durationBar = document.createElement('div');\n    durationBar.classList.add('bamios-progress-bar');\n    let mouseClickedDurationBar = false;\n    let mouseEnteredDurationBar = false;\n\n    durationBar.addEventListener('mousedown', (durationBarEvent) => {\n      mouseClickedDurationBar = true;\n      this.isAdjustingTime = true;\n      this.pause();\n      const offsetX =\n        durationBarEvent.clientX - durationBar.getBoundingClientRect().left;\n      if (\n        offsetX >= 0 &&\n        offsetX <= durationBar.getBoundingClientRect().width\n      ) {\n        const second =\n          (offsetX / durationBar.getBoundingClientRect().width) *\n          this.audio.duration;\n        this.setCurrentTime(second);\n        progressHandle.style.transform =\n          'translate(' + (offsetX - 8) + 'px, -50%)';\n      }\n    });\n\n    window.addEventListener('mouseup', () => {\n      mouseClickedDurationBar = false;\n      if (this.isAdjustingTime) {\n        this.isAdjustingTime = false;\n        if (this.pauseOthersOnPlay && this.isClickedPlayBtn) {\n          Bamios.pauseOtherPlayers();\n          this.play();\n        }\n      }\n      if (!mouseEnteredDurationBar) {\n        progressHandle.style.transition = 'opacity 0.6s ease-in-out';\n        progressHandle.style.opacity = 0;\n      }\n\n      if (!this.muted) {\n        this.audio.muted = false;\n      }\n    });\n\n    durationBar.addEventListener('mouseenter', () => {\n      mouseEnteredDurationBar = true;\n      progressHandle.style.display = 'block';\n      progressHandle.style.transition = 'opacity 0.15s ease-in-out';\n      progressHandle.style.opacity = 1;\n    });\n\n    durationBar.addEventListener('mouseleave', () => {\n      mouseEnteredDurationBar = false;\n\n      if (!mouseClickedDurationBar) {\n        progressHandle.style.display = 'none';\n        progressHandle.style.transition = 'opacity 0.6s ease-in-out';\n        progressHandle.style.opacity = 0;\n      }\n    });\n\n    window.addEventListener('mousemove', (durationBarEvent) => {\n      if (mouseClickedDurationBar) {\n        this.audio.muted = true;\n        const offsetX =\n          durationBarEvent.clientX - durationBar.getBoundingClientRect().left;\n        const second =\n          (offsetX / durationBar.getBoundingClientRect().width) *\n          this.audio.duration;\n\n        if (\n          offsetX >= 0 &&\n          offsetX <= durationBar.getBoundingClientRect().width\n        ) {\n          progressHandle.style.transform =\n            'translate(' + (offsetX - 8) + 'px, -50%)';\n          this.setCurrentTime(second);\n        }\n      }\n    });\n\n    // Progress\n    this.progress = document.createElement('div');\n    this.progress.classList.add('bamios-progress-list');\n    const playProgress = document.createElement('div');\n    playProgress.classList.add('bamios-play-progress');\n    this.progress.append(playProgress);\n\n    // Progress handle\n    const progressHandle = document.createElement('div');\n    progressHandle.classList.add('bamios-progress-handle');\n    durationBar.append(progressHandle);\n    durationBar.append(this.progress);\n\n    // Add duration bar\n    this.controlsRight.append(durationBar);\n\n    // Duration\n    this.duration = document.createElement('div');\n    this.duration.classList.add('bamios-duration');\n    this.duration.innerText = '00:00';\n    this.controlsRight.append(this.duration);\n\n    // Volume control\n    this.controlsRight.append(this.volumeCtl);\n    this.volumeSlider.style.width = '100%';\n\n    this.audio.onloadedmetadata = () => {\n      this.duration.innerText = Bamios.toTimeString(this.audio.duration);\n      this.volumeHandle.style.transform =\n        'translate(' + (this.audio.volume * 80 - 8) + 'px, -50%)';\n    };\n\n    this.player.append(this.controlsRight);\n  }\n\n  initEvents() {\n    let mouseClickedVolumeWrapper = false;\n    let mouseEnteredVolumeWrapper = false;\n    let mouseEnteredVolumeCtl = false;\n    let mouseHoverVolumeCtl = false;\n\n    this.replayBtn.addEventListener('click', () => {\n      this.audio.currentTime = this.audio.currentTime - 10;\n    });\n\n    this.volumeBtn.addEventListener('click', (volumeBtnEvent) => {\n      if (this.audio.volume > 0) {\n        if (!volumeBtnEvent.currentTarget.classList.contains('muted')) {\n          volumeBtnEvent.currentTarget.classList.add('muted');\n          volumeBtnEvent.currentTarget.innerHTML = Bamios.volumeOffIcon();\n          this.volumeSlider.style.width = '0%';\n          this.volumeHandle.style.transform = 'translate(-8px, -50%)';\n          this.audio.muted = true;\n          this.muted = true;\n        } else {\n          volumeBtnEvent.currentTarget.classList.remove('muted');\n          volumeBtnEvent.currentTarget.innerHTML = Bamios.volumeIcon();\n          this.volumeSlider.style.width = this.audio.volume * 100 + '%';\n          this.volumeHandle.style.transform =\n            'translate(' + (this.audio.volume * 80 - 8) + 'px, -50%)';\n          this.audio.muted = false;\n          this.muted = false;\n        }\n      }\n    });\n\n    this.volumeCtl.addEventListener('mouseenter', () => {\n      mouseHoverVolumeCtl = true;\n      if (window.innerWidth > 520) {\n        this.volumePanel.style.width = '80px';\n        this.volumeCtl.style.paddingLeft = '15px';\n        this.volumeCtl.style.background = 'rgba(0, 0, 0, 0.04)';\n        this.volumePanelContainer.style.marginRight = '10px';\n        this.volumePanel.style.opacity = 1;\n        setTimeout(() => {\n          if (mouseHoverVolumeCtl && !this.audio.muted) {\n            this.volumeHandle.style.transform =\n              'translate(' + (this.audio.volume * 80 - 8) + 'px, -50%)';\n          }\n        }, 150);\n      }\n    });\n\n    this.volumeCtl.addEventListener('mouseleave', () => {\n      if (!mouseClickedVolumeWrapper) {\n        mouseHoverVolumeCtl = false;\n        this.volumePanel.style.width = 0;\n        this.volumeCtl.style.paddingLeft = 0;\n        this.volumeCtl.style.background = 'transparent';\n        this.volumePanelContainer.style.marginRight = 0;\n        this.volumePanel.style.opacity = 0;\n        this.volumeHandle.style.opacity = 0;\n        this.volumeHandle.style.display = 'none';\n      }\n    });\n\n    this.volumePanelContainer.addEventListener(\n      'mousedown',\n      (volumePanelContainerEvent) => {\n        mouseClickedVolumeWrapper = true;\n        const offsetX =\n          volumePanelContainerEvent.clientX -\n          this.volumePanelContainer.getBoundingClientRect().left;\n        if (offsetX >= 0 && offsetX <= 80) {\n          let volume = offsetX / 80;\n          if (volume < 0) volume = 0;\n          if (volume > 1) volume = 1;\n          this.audio.volume = volume;\n          this.volumeSlider.style.width = volume * 100 + '%';\n          this.volumeHandle.style.transform =\n            'translate(' + (offsetX - 8) + 'px, -50%)';\n\n          if (volume <= 0) {\n            this.volumeBtn.innerHTML = Bamios.volumeOffIcon();\n            this.audio.muted = true;\n            this.muted = true;\n          } else if (volume <= 0.6) {\n            this.volumeBtn.innerHTML = Bamios.volumeLowIcon();\n            this.audio.muted = false;\n            this.muted = false;\n          } else {\n            this.volumeBtn.innerHTML = Bamios.volumeIcon();\n            this.audio.muted = false;\n            this.muted = false;\n          }\n        }\n      }\n    );\n\n    window.addEventListener('mouseup', (durationBarEvent) => {\n      mouseClickedVolumeWrapper = false;\n      if (!mouseEnteredVolumeWrapper) {\n        this.volumeHandle.style.opacity = 0;\n        this.volumeHandle.style.display = 'none';\n      }\n\n      if (!mouseEnteredVolumeCtl) {\n        this.volumePanel.style.width = 0;\n        this.volumeCtl.style.paddingLeft = 0;\n        this.volumeCtl.style.background = 'transparent';\n        this.volumePanelContainer.style.marginRight = 0;\n        this.volumePanel.style.opacity = 0;\n      }\n    });\n\n    window.addEventListener('mousemove', (volumePanelContainerEvent) => {\n      if (mouseClickedVolumeWrapper) {\n        const offsetX =\n          volumePanelContainerEvent.clientX -\n          this.volumePanelContainer.getBoundingClientRect().left;\n\n        let volume = offsetX / 80;\n        if (volume < 0) volume = 0;\n        if (volume > 1) volume = 1;\n\n        if (offsetX <= 0) {\n          this.audio.volume = 0;\n          this.volumeSlider.style.width = 0;\n          this.volumeHandle.style.transform = 'translate(-8px, -50%)';\n        } else if (\n          offsetX > 0 &&\n          offsetX <= this.volumePanelContainer.getBoundingClientRect().width\n        ) {\n          this.audio.volume = volume;\n          this.volumeSlider.style.width = volume * 100 + '%';\n          this.volumeHandle.style.transform =\n            'translate(' + (offsetX - 8) + 'px, -50%)';\n        } else {\n          this.audio.volume = 1;\n          this.volumeSlider.style.width = '100%';\n          this.volumeHandle.style.transform =\n            'translate(' + (80 - 8) + 'px, -50%)';\n        }\n\n        if (volume <= 0) {\n          this.volumeBtn.innerHTML = Bamios.volumeOffIcon();\n          this.audio.muted = true;\n          this.muted = true;\n        } else if (volume <= 0.5) {\n          this.volumeBtn.innerHTML = Bamios.volumeLowIcon();\n          this.audio.muted = false;\n          this.muted = false;\n        } else {\n          this.volumeBtn.innerHTML = Bamios.volumeIcon();\n          this.audio.muted = false;\n          this.muted = false;\n        }\n      }\n    });\n\n    this.volumePanelContainer.addEventListener('mouseenter', () => {\n      mouseEnteredVolumeWrapper = true;\n      this.volumeHandle.style.opacity = 1;\n      this.volumeHandle.style.display = 'block';\n    });\n\n    this.volumePanelContainer.addEventListener('mouseleave', () => {\n      mouseEnteredVolumeWrapper = false;\n      if (!mouseClickedVolumeWrapper) {\n        this.volumeHandle.style.opacity = 0;\n        this.volumeHandle.style.display = 'none';\n      }\n    });\n\n    this.volumeCtl.addEventListener('mouseenter', () => {\n      mouseEnteredVolumeCtl = true;\n    });\n\n    this.volumeCtl.addEventListener('mouseleave', () => {\n      mouseEnteredVolumeCtl = false;\n    });\n  }\n\n  play() {\n    if (!this.isPlaying && this.pauseOthersOnPlay) {\n      Bamios.pauseOtherPlayers();\n    }\n    Bamios.playPlayer(this.player);\n  }\n\n  pause() {\n    Bamios.pausePlayer(this.player);\n  }\n\n  stop() {\n    Bamios.pausePlayer(this.player);\n    this.audio.currentTime = 0;\n  }\n\n  setCurrentTime(second) {\n    if (second >= 0 && second <= this.audio.duration) {\n      this.audio.currentTime = second;\n    }\n  }\n\n  setPauseOthersOnPlay(pauseOthersOnPlay) {\n    this.pauseOthersOnPlay = pauseOthersOnPlay;\n  }\n\n  static playIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm4.56 10.87l-6.07 3.44A1 1 0 019 15.45v-6.9a1 1 0 011.46-.86l6.07 3.44a1 1 0 01.03 1.74z\"/></svg>';\n  }\n\n  static pauseIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-1.24 13a1.5 1.5 0 01-3 0V9a1.5 1.5 0 013 0v6zm5.48 0a1.5 1.5 0 01-3 0V9a1.5 1.5 0 013 0v6z\"/></svg>';\n  }\n\n  static replayIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M8.72 10.324l-.59.436a.55.55 0 01-.35.109c-.16 0-.3-.06-.42-.18s-.18-.264-.18-.43c0-.214.103-.387.31-.521l1.44-.96a.646.646 0 01.225-.1c.083-.018.161-.028.235-.028.193 0 .346.059.46.175.113.117.17.262.17.436v5.78a.579.579 0 01-.185.436.67.67 0 01-.475.173.635.635 0 01-.46-.175.584.584 0 01-.18-.436v-4.715zm5.219 5.426c-.572 0-1.058-.151-1.454-.455-.397-.303-.699-.727-.905-1.27s-.31-1.168-.31-1.875c0-.713.104-1.34.31-1.88s.508-.962.905-1.265c.396-.304.882-.455 1.454-.455.574 0 1.059.151 1.455.455.396.303.699.725.906 1.265.206.54.31 1.167.31 1.88 0 .707-.104 1.333-.31 1.875-.207.543-.51.967-.906 1.27-.396.304-.88.455-1.455.455zm0-1.199c.281 0 .522-.089.726-.266s.362-.443.476-.8.17-.802.17-1.335c0-.54-.057-.986-.17-1.34s-.272-.618-.476-.795-.444-.265-.726-.265a1.07 1.07 0 00-.719.266c-.207.177-.367.441-.48.795-.114.354-.17.8-.17 1.34 0 .533.056.979.17 1.335.113.356.273.623.48.8.207.176.446.265.719.265zm4.081-8.567A8.457 8.457 0 0012.011 3.5L12 3.502V2.53a.58.58 0 00-.94-.45l-2.43 2a.57.57 0 000 .92l2.43 2a.58.58 0 00.94-.53V5.5h.011c1.735 0 3.367.675 4.597 1.9a6.47 6.47 0 011.913 4.601 6.463 6.463 0 01-1.9 4.605 6.47 6.47 0 01-4.6 1.913h-.011a6.47 6.47 0 01-4.595-1.899 6.469 6.469 0 01-1.915-4.6 6.557 6.557 0 011.925-4.63 1 1 0 00-1.409-1.42A8.573 8.573 0 003.5 12.022a8.456 8.456 0 002.501 6.014 8.45 8.45 0 006.007 2.483h.015a8.452 8.452 0 006.013-2.501 8.455 8.455 0 002.484-6.021 8.45 8.45 0 00-2.5-6.013z\"/></svg>';\n  }\n\n  static forwardIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M8.72 10.324l-.59.436a.55.55 0 01-.35.109c-.16 0-.3-.06-.42-.18s-.18-.264-.18-.43c0-.214.103-.387.31-.521l1.44-.96a.646.646 0 01.225-.1c.083-.018.161-.028.235-.028.193 0 .346.059.46.175.113.117.17.262.17.436v5.78a.579.579 0 01-.185.436.67.67 0 01-.475.173.635.635 0 01-.46-.175.584.584 0 01-.18-.436v-4.715zm5.219 5.426c-.572 0-1.058-.151-1.454-.455-.397-.303-.699-.727-.905-1.27s-.31-1.168-.31-1.875c0-.713.104-1.34.31-1.88s.508-.962.905-1.265c.396-.304.882-.455 1.454-.455.574 0 1.059.151 1.455.455.396.303.699.725.906 1.265.206.54.31 1.167.31 1.88 0 .707-.104 1.333-.31 1.875-.207.543-.51.967-.906 1.27-.396.304-.88.455-1.455.455zm0-1.199c.281 0 .522-.089.726-.266s.362-.443.476-.8.17-.802.17-1.335c0-.54-.057-.986-.17-1.34s-.272-.618-.476-.795-.444-.265-.726-.265a1.07 1.07 0 00-.719.266c-.207.177-.367.441-.48.795-.114.354-.17.8-.17 1.34 0 .533.056.979.17 1.335.113.356.273.623.48.8.207.176.446.265.719.265zm4.045-8.58a1 1 0 10-1.408 1.419 6.548 6.548 0 011.923 4.629 6.472 6.472 0 01-1.913 4.601 6.466 6.466 0 01-4.595 1.899h-.011a6.472 6.472 0 01-4.601-1.913 6.467 6.467 0 01-1.9-4.605A6.473 6.473 0 017.393 7.4a6.465 6.465 0 014.597-1.9h.011v.97a.579.579 0 00.939.53l2.43-2a.57.57 0 000-.92l-2.43-2a.58.58 0 00-.94.45v.97h-.011A8.455 8.455 0 005.98 5.984a8.456 8.456 0 00-2.501 6.014c-.003 2.272.879 4.411 2.484 6.021s3.741 2.498 6.014 2.501h.014c2.268 0 4.4-.882 6.007-2.483a8.456 8.456 0 002.501-6.014 8.562 8.562 0 00-2.515-6.052z\"/></svg>';\n  }\n\n  static volumeIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M13.5 4.23v15.54a1.8 1.8 0 01-3.19 1.13l-4-4.9H4.2a1.7 1.7 0 01-1.7-1.7V9.7A1.7 1.7 0 014.2 8h2.11l4-4.9a1.8 1.8 0 013.19 1.13zm5.771 14.661c3.793-3.8 3.793-9.982-.001-13.78a.751.751 0 00-1.061 1.06c3.209 3.214 3.209 8.445-.001 11.66a.752.752 0 00.531 1.281.759.759 0 00.532-.221zm-2.121-2.12c2.627-2.631 2.627-6.911 0-9.541a.751.751 0 00-1.061 1.06 5.258 5.258 0 010 7.42.75.75 0 101.061 1.061z\"/></svg>';\n  }\n\n  static volumeLowIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M13.5 4.23v15.54a1.8 1.8 0 01-3.19 1.13l-4-4.9H4.2a1.7 1.7 0 01-1.7-1.7V9.7A1.7 1.7 0 014.2 8h2.11l4-4.9a1.8 1.8 0 013.19 1.13zm3.65 12.541c2.627-2.631 2.627-6.911 0-9.541a.751.751 0 00-1.061 1.06 5.258 5.258 0 010 7.42.75.75 0 101.061 1.061z\"/></svg>';\n  }\n\n  static volumeOffIcon() {\n    return '<svg viewBox=\"0 0 24 24\"><path d=\"M13.5 4.23v15.54a1.8 1.8 0 01-3.19 1.13l-4-4.9H4.2a1.7 1.7 0 01-1.7-1.7V9.7A1.7 1.7 0 014.2 8h2.11l4-4.9a1.8 1.8 0 013.19 1.13zm8.03 10.55a.75.75 0 000-1.061l-4.5-4.5a.75.75 0 10-1.061 1.061l4.5 4.5a.748.748 0 001.061 0zm-4.5 0l4.5-4.5a.75.75 0 10-1.061-1.061l-4.5 4.5a.75.75 0 101.061 1.061z\"/></svg>';\n  }\n\n  static playPlayer(player) {\n    const playPauseButton = player.querySelector('.bamios-btn-play-pause');\n    const audio = player.querySelector('audio');\n    playPauseButton.classList.add('bamios-playing');\n    playPauseButton.innerHTML = Bamios.pauseIcon();\n    audio.play();\n  }\n\n  static pausePlayer(player) {\n    const playPauseButton = player.querySelector('.bamios-btn-play-pause');\n    const audio = player.querySelector('audio');\n    playPauseButton.classList.remove('bamios-playing');\n    playPauseButton.innerHTML = Bamios.playIcon();\n    audio.pause();\n  }\n\n  static pauseOtherPlayers() {\n    const players = document.querySelectorAll('.bamios');\n    for (let i = 0; i < players.length; i++) {\n      Bamios.pausePlayer(players[i]);\n    }\n  }\n\n  static toTimeString(totalSeconds) {\n    const totalMinutes = Math.floor(totalSeconds / 60);\n    const seconds = Math.floor(totalSeconds % 60);\n    const minutes = Math.floor(totalMinutes % 60);\n    return (\n      minutes.toString().padStart(2, '0') +\n      ':' +\n      seconds.toString().padStart(2, '0')\n    );\n  }\n}\n\nexport default Bamios;\n"],"names":["el","options","_classCallCheck","this","Bamios","opts","player","document","querySelector","undefined","audio","pauseOthersOnPlay","muted","isAdjustingTime","isClickedPlayBtn","initUi","initEvents","key","value","playPauseButton","classList","add","innerHTML","pauseIcon","play","remove","playIcon","pause","players","querySelectorAll","i","length","pausePlayer","totalSeconds","totalMinutes","Math","floor","seconds","toString","padStart","_this","volumeCtl","createElement","volumePanelContainer","append","volumeHandle","volumePanel","volumeSlider","volumeBtn","volumeIcon","controlsLeft","replayBtn","setAttribute","replayIcon","playBtn","addEventListener","playBtnEvent","currentTarget","contains","pauseOtherPlayers","playPlayer","forwardBtn","currentTime","forwardIcon","controlsRight","innerText","ontimeupdate","toTimeString","currentPercent","duration","playProgress","style","width","mouseClickedDurationBar","progressHandle","transform","getBoundingClientRect","onended","stop","durationBar","mouseEnteredDurationBar","durationBarEvent","offsetX","clientX","left","second","setCurrentTime","window","transition","opacity","display","progress","onloadedmetadata","volume","_this2","mouseClickedVolumeWrapper","mouseEnteredVolumeWrapper","mouseEnteredVolumeCtl","mouseHoverVolumeCtl","volumeBtnEvent","volumeOffIcon","innerWidth","paddingLeft","background","marginRight","setTimeout","volumePanelContainerEvent","volumeLowIcon","isPlaying"],"mappings":"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"}